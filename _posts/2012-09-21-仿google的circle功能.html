---
layout: post
title: 仿Google+的Circle功能
---

<p>http://www.circlehack.com/ (qiang外)是facebook四个工程师通宵一晚上的成果，体验和效果上和Google+中的circle相比还是逊色一些</p>  <p>整个源代码在github上https://github.com/voloko/facebook-circles</p>  <p>circlehack.com中的示例截图(都是使用CSS3来画圈)：</p>  <p> </p>  <p>Google+的示例截图(使用图片+Canvas，动画、过渡效果明显比上面要好，复杂度比上面实现要高)：</p>  <p> </p>  <p>下面就是Google+用到的图片</p>  <p> </p>  <p>&#160;</p>  <p>我把它抽离出一个demo出来，点击链接可以在线查看示例(需要使用 支持CSS3的浏览器查看，建议使用Chrome)：</p>  <p>http://fiddle.jshell.net/meteoric_cry/2szaD/show/</p>  <p>&#160;</p>  <p>实现上述的效果，里面应用了很多CSS3的属性，这样就减少了很多对DOM的操作，完整的代码如下：</p>     <pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px" id="codeSnippet">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;&lt;html&gt; &lt;head&gt;  &lt;title&gt;~circlehack~&lt;/title&gt;  &lt;meta name=&quot;generator&quot; content=&quot;editplus&quot; /&gt;  &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;  &lt;meta name=&quot;keywords&quot; content=&quot;&quot; /&gt;  &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;  &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;  &lt;style type=&quot;text/css&quot;&gt;body, html {width: 100%; height: 100%; padding: 0; margin: 0; font-family: arial, sans-serif;}[draggable] {-webkit-user-drag: element;}.circle {color: #FFF; width: 125px; height: 125px; position: relative; margin: 35px;}.circle__disk {border: 1px solid #CCC; border-radius: 200px; position: absolute; width: 124px; height: 124px; top: 50%; left: 50%; margin-left: -62px; margin-top: -62px; z-index: 2; -webkit-transition-property: width, height, margin-left, margin-top; -webkit-transition-duration: 0.3s; -moz-transition-property: width, height, margin-left, margin-top; -moz-transition-duration: 0.3s; background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#d7d7d7));}.circle__disk {background: -webkit-linear-gradient(top, #ededed 0%, #d7d7d7 100%);}.circle__disk {background: -moz-linear-gradient(top, #ededed 0%,#d7d7d7 100%);}.circle_full.circle_tmp .circle__disk, .circle_over .circle__disk {width: 170px; height: 170px; margin-left: -85px; margin-top: -85px; background: #e1e1e1;}.circle__inner {background: #4797cf; border-radius: 70px; box-shadow: inset 0 1px 1px rgba(0,0,0,0.3); border-bottom: 1px solid #FFF; width: 98px; height: 98px; position: absolute; top: 50%; left: 50%; margin-left: -49px; margin-top: -49px; z-index: 3;}.circle_tmp .circle__inner {background: #FFF;}.circle__text {position: absolute; z-index: 4; top: 50%; left: 50%; width: 98px; text-align: center; font-size: 13px; margin-top: -13px; margin-left: -49px; color: #999;}.circle__create {position: absolute; z-index: 4; top: 50%; left: 50%; width: 98px; text-align: center; font-size: 13px; margin-top: -7px; margin-left: -49px; color: #309;}.circle__create__a {text-decoration: underline; color: #30C; cursor: pointer;}.circle__create__a:hover {color: #C03;}.circle_empty .circle__create {display: none;}.circle_full .circle__text {display: none;}.circle_tmp .circle__number, .circle_tmp .circle__name {display: none;}.circle__number {position: absolute; top: 50%; width: 98px; text-align: center; font-size: 16px; margin-top: 5px; opacity: 0.5;}.circle__name {position: absolute; bottom: 50%; width: 98px; text-align: center; font-size: 13px;}.circleFriend {position: absolute; left: 50%; top: 50%; border-radius: 30px; z-index: 4; opacity: 0; width: 30px; height: 30px; -webkit-transition-property: opacity; -webkit-transition-duration: 0.3s; -moz-transition-property: opacity; -moz-transition-duration: 0.3s;}.circle_full.circle_tmp .circleFriend, .circle_over .circleFriend {-webkit-transition-delay: .1s; -moz-transition-delay: .1s; opacity: 1;}.circle__popup {position: absolute; width: 32px; height: 32px; border-radius: 32px; z-index: 300; left: 50%; top: 50%; margin-top: 40px; margin-left: 60px; -webkit-transition-property: opacity, margin-top, margin-left; -webkit-transition-duration: 0.7s; -moz-transition-property: opacity, margin-top, margin-left; -moz-transition-duration: 1s; opacity: 0; text-align: center; line-height: 32px; color: #FFF; font-size: 15px;}.circle__popup_red {background: -webkit-gradient(linear, left top, left bottom, from(#d20040), to(#d20040));}.circle__popup_red {background: -webkit-linear-gradient(top, #d20040 0%, #ae0035 100%);}.circle__popup_red {background: -moz-linear-gradient(top, #d20040 0%, #ae0035 100%);}.circle__popup_green {background: -webkit-gradient(linear, left top, left bottom, from(#00d240), to(#00d240));}.circle__popup_green {background: -webkit-linear-gradient(top, #00d240 0%, #00ae35 100%);}.circle__popup_green {background: -moz-linear-gradient(top, #00d240 0%, #00ae35 100%);}.circle__popup_phase1 {margin-top: -60px; margin-left: 30px; opacity: 1;}.circle__popup_phase2 {opacity: 0;}#test {margin:100px;}button {width:100px; height:32px; margin-left:50px; cursor:pointer; background:-webkit-linear-gradient(top, #EEE 0%, #BBB 100%); border:1px solid #666;}  &lt;/style&gt; &lt;/head&gt; &lt;body&gt;  &lt;div class=&quot;circle circle_full&quot; id=&quot;test&quot;&gt;    &lt;div class=&quot;circle__disk&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;circle__inner&quot;&gt;        &lt;div class=&quot;circle__name&quot;&gt;测试１&lt;/div&gt;        &lt;div class=&quot;circle__number&quot; id=&quot;friend_num&quot;&gt;0&lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;&lt;button&gt;add Frient&lt;/button&gt;&lt;script type=&quot;text/javascript&quot;&gt;function getEl(id) {    return typeof id === 'string' ? document.getElementById(id) : id;}getEl(&quot;test&quot;).onmouseover = function() {    this.className = &quot;circle circle_full circle_over&quot;;};getEl(&quot;test&quot;).onmouseout = function() {    this.className = &quot;circle circle_full&quot;;};var index = 0;document.getElementsByTagName(&quot;button&quot;)[0].onclick = function() {    if (index &gt;= 12) {        this.disabled = true;        return ;    }    var img = document.createElement(&quot;img&quot;);        img.className = &quot;image circleFriend&quot;;    img.src = [        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/41487_691724478_6265_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/41531_851335273_3046447_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/211978_100001174061425_2365381_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/70365_794569104_6244312_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/273926_1023602453_4918544_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/41388_668019731_9699_q.jpg',        'https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/276415_6815841748_4775941_q.jpg',        'https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/275680_100001553835190_4022025_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/41487_691724478_6265_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/275688_100001963685246_6575661_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/274603_100002541323180_733311_q.jpg',        'http://profile.ak.fbcdn.net/hprofile-ak-snc4/186196_1223485640_4353838_q.jpg'    ][index];    var b = 2 * Math.PI / 12 * index,        c = 67,        d = Math.sin(b) * c,        e = -Math.cos(b) * c;        img.style.marginLeft = d - 15 + &quot;px&quot;;    img.style.marginTop = e - 15 + &quot;px&quot;;    getEl(&quot;test&quot;).appendChild(img);    getEl(&quot;test&quot;).onmouseover();        var rect = getEl(&quot;test&quot;).getBoundingClientRect(),        tip = document.createElement(&quot;div&quot;);        tip.innerHTML = (index % 2 === 0) ? &quot;-1&quot; : &quot;+1&quot;;    tip.className = (index % 2 === 0 ? &quot;circle__popup_red&quot; : &quot;circle__popup_green&quot;) + &quot; circle__popup&quot;;    tip.style.cssText = &quot;left: &quot; + rect.left + &quot;px; top: &quot; + rect.top + &quot;px&quot;;    document.body.appendChild(tip);    setTimeout(function() {        tip.className += &quot; circle__popup_phase1&quot;;                tip._timer = setTimeout(function() {            tip.className += &quot; circle__popup_phase2&quot;;            setTimeout(function() {                document.body.removeChild(tip);                tip = null;            }, 700);        }, 700);    }, 1);    getEl(&quot;friend_num&quot;).innerHTML = ++index;};&lt;/script&gt; &lt;/body&gt;&lt;/html&gt;</pre>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>