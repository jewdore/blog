---
layout: post
title: Arch Linux Nvidia 双显卡切换
---

<p>20120625更新，bumblebee 可用，是我自己安装有问题，现在电脑上网稳定 54度，很不错。</p><p>此招式不好用，废掉，坐等更新。。。</p><p>由于悲催的NVIDIA双显卡电源管理，我的 Acer 5750G 笔记本在运行 Arch Linux 时，通过 sensor 检测到的温度持续</p><p>在 80 C 以上，这让我情何以堪。。。</p><p>首先，我没有找到官方的方法，但是从各个方面的证据来看，vga_switcheroo 这种方法只对于 Intel 和 ATI 的显卡组合有效，对于</p><p>Intel 和 NVIDIA 的显卡组合无效。</p><p>本文只对 Arch 操作，其他发行版请参考 Bumblebee的主页。</p><p>如果不是双系统，最简单的方法就是在 BIOS 里废掉集成显卡，一步到位。</p><p>如果是双系统，请继续。</p><p>1.参考如下内容</p><p>https://wiki.archlinux.org/index.php/Bumblebee</p><p>使用 dkms-nvidia 驱动。</p><p>最终结果，配置文件视情况修改，在 DAEMONS 中增加 bumblebeed 启动。</p><p>DAEMONS=(... @bumblebeed ..)</p><p>bumblebee 的主页：http://www.bumblebee-project.org/</p><p>2.配置bbswitch 作为电源管理方法，在上面的维基中有提到</p><p>如果一切良好，那么一段时间后即可看到温度下降。</p><p>对于我的机器而言，是从 86 下降到 60 度。这个我还是能接受的。</p><p>3.配置开机关闭独立显卡。</p><p>编辑 rc.conf，在 MODULES 中增加 bbswitch。</p><p>MODULES=(... bbswitch ...)</p><p>同时为了开机不启动独立显卡，编译 /etc/modprobe.d/modules.conf</p><p>（这个文件可能没有，自己新建一个吧，一定要是.conf作为后缀的。）</p><p>增加：</p><p>options bbswitch load_state=0</p><p>关于内核模块，可参考 https://wiki.archlinux.org/index.php/Kernel_modules</p><p>关于 bbswitch 可参考 https://github.com/Bumblebee-Project/bbswitch</p><p>如果在内核里写入这样，那么独立显卡就不会启用了，你重启后直接输入 optirun也不能调用独立显卡，还是会走到集成显卡上去。可以通过 glxspheres 程序来进行测试。</p><p>4.检查显卡状态</p><p>重启之后，查看</p><p>[gaohu@tg-arch ~]$ lspci |grep VGA00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller (rev 09)01:00.0 VGA compatible controller: NVIDIA Corporation GF108 [GeForce GT 540M] (rev ff)</p><p>末尾是个 ff，表示已经关闭了，</p><p>或者</p><p>[gaohu@tg-arch ~]$ sudo cat /proc/acpi/bbswitch 0000:01:00.0 OFF可以看到是关闭了。</p><p>参考：</p><p>https://help.ubuntu.com/community/HybridGraphics</p><p>https://bbs.archlinux.org/viewtopic.php?id=136933</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>