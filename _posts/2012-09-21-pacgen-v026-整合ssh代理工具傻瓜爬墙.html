---
layout: post
title: Pacgen v0.2.6 | 整合SSH代理工具, 傻瓜爬墙!
---

<p>写在前面</p><p>Pacgen目前是基于HTML+JS的HTA(HTML Application), 整合了Tunnelier和Privoxy, 通过SSH服务器做中转, 用Tunnelier搭建SOCKS5代理, 然后再通过Privoxy将SOCKS5转换为HTTP. 在一些做了某些安全设置的电脑上运行可能会出现一些问题, 但是不妨一试.</p><p>更新记录</p><p>2011-12-9v0.2.61. 综合tskill和taskkill命令.2. 小修正.</p><p>2011-12-8v0.2.51. 将tskill命令更改为taskkill命令, 兼容Windows 7 Home.v0.2.41. 修改升级及工具包升级代码.2. 工具包更新.3. 其他优化.</p><p>2011-12-7v0.2.31. 修改工具包升级代码.2. 工具包更新.</p><p>2011-12-6v0.2.21. Bug修复.v0.2.11. 增加tools package升级功能.2. 其他小修改.</p><p>2011-12-5v0.21. 整合Tunnelier和Privoxy, 更加傻瓜.2. 其他调整若干.</p><p>2011-12-3v0.1.31. 支持自动升级.v0.1.21. 兼容IE6.v0.1.11. 修正目录问题.</p><p>--------------------</p><p>在二十一世纪的中国, 学会爬墙显然已经比一张英语四级的证书更加重要, 但会爬墙, 会爬好墙的却为数不多. 下面提供的这个方法适用于Windows下使用系统代理设置的IE, Chrome, Safari等等. 该方法理论上可以在Dr.COM 5.2的惨烈环境下继续使用.</p><p>完成一系列的配置之后, 我们将达到的目的是, 对于被墙的网站, 爬墙访问, 对于没有被墙的网站, 则直接连接. 并且在Pacgen的帮助下, 不会写脚本的同学也可以方便地维护自己的Pac列表.</p><p>前期准备</p><p>1. SSH账号一个. 有很多免费的SSH账号可以申请, 不过建议大家还是买个付费的. 我现在在用http://www.sshcenter.info/这个, 每月5元, 每年45元, 免费24小时. 速度还将就(现在是深夜+现在是11:24AM, 看Youtube很流畅).</p><p>2. 下载Pacgen.Githubhttps://raw.github.com/vilic/pacgen/master/pacgen.hta(注意, 右键另存为)</p><p>运行Pacgen</p><p>就, 因为我是做前端的, 桌面开发比较弱, 这次依旧选择了自己比较熟悉的HTA, 在一些保养得不怎么好的电脑上, HTA程序经常遇到各种各样的问题, 特别是装了360什么的. 如果不能正常使用, 可以试着下载http://www.vilic.info/aiesec/analyzer/fix.rar, 里面有一个名为fix.bat的批处理文件, 双击执行, 能修复多数问题.</p><p>Pacgen 0.2在0.1的基础上有很大改进, 整合了Tunnelier和Privoxy, 让大家特别是不是很能折腾的同学能更容易地搞定.</p><p>建议把Pacgen放到一个比较 "安静" 地位置, 最好不要放到桌面上. 比如可以放到D:\Program Files\Pacgen\目录下,另外避免使用中文文件夹. 为了方便管理, 可以给pacgen.hta创建一个快捷方式, 放到容易够得着的地方. 放置好后, 运行Pacgen, 如果弹出下面的窗口,一定要去掉 "在打开前总是询问".</p><p>第一次运行Pacgen 0.2, 会提示下载tools package, 按照提示确认即可. 工具包有1.8M的样子, 可能要下载几分钟, 之后会自动解压. 完成后界面如下.</p><p>首先点击Tunnelier下的Edit profile, 然后在打开的Tunnelier窗口中的标红处分别填入Host(SSH服务器地址), Port(SSH端口, 默认为22), Username(SSH用户名), Password(SSH密码). 入股有需要, 还可以在Services选项卡下更改SOCKS5代理的端口(默认是1080), 但是如果你对这些东西不熟悉, 建议不要更改.</p><p>填入必须的信息后, 点击左边的Save Profile保存配置, 然后点击右下方的Exit退出. 以后更改设置后, 如果已经有Tunnelier在运行, 需要重启Tunnelier.</p><p>退出前也可以单击下方的Login按钮, 看看是否能正常登陆.</p><p>退出后回到Pacgen, 现在Tunnelier和Privoxy还没有运行, 可以单击Tunnelier和Privoxy右边的Start now运行它们. 默认下次开机的时候它们会自动运行, 如果不希望如此, 可以把对应的Start with Windows设置成off, 单击即可. 之后可以运行Pacgen并手动运行它们.</p><p>Privoxy下有两个文本框, 第一个是Privoxy会监听的端口, 默认1107, 如果不是很了解, 就不用修改了. 第二个是SOCKS5代理的地址, 如果在Tunnelier profile设置的时候没有改动其他东西, 那么这个也不用修改. 如果有改动SOCKS5的端口, 对应修改即可. 上图登陆SSH服务器后, 标红部分 "Initializing SOCKS / HTTP CONNECT proxy on 127.0.0.1:1080 succeeded." 其中127.0.0.1:1080则是这个文本框需要填写的. 这里更改后需要重新点击Generate生成pac文件, 且需要重启Privoxy.</p><p>在PAC标题下有两个文本框, 第一个文本框是PAC文件中配置代理的语句, 自动生成, 如果不清楚, 请不要修改. 下面一个文本框是PAC文件地址, 只读. 现在点击Copy, 该地址会被复制到剪贴板, 且Pacgen会打开Internet 选项. 先切换到 "连接" 选项卡, 界面如下:</p><p>如果你现在是拨号上网, 比如3G上网卡, ADSL, 或者是通过VPN上网, 则需要在 "拨号和VPN连接" 一栏下选中现在使用的链接, 然后点击右边的 "设置". 如果是Dr.COM这一类上网方式, 则直接点开下面的 "局域网设置". 界面有一点小区别, 不过上面是一样的:</p><p>勾选 "使用自动配置脚本", 并在 "地址" 文本框中填上刚刚从Pacgen上复制的地址. 取消下面 "代理服务器" 的勾选, 最后一路确定.</p><p>现在又回到Pacgen.在下面的Custom rules栏, 可以自己添加规则, 比如我通常是*.google.com全局爬墙, 这样不怕链接被重置, 也可以提高访问速度, 比如大家觉得gmail最近比较慢, 那么爬墙之后可能会快些.在文本框中输入 "google.com", 回车或者点击Add, 会提示是否包含子域名, 一般我是习惯包含的. 或者也可以在回车/点击Add的同时按住Ctrl键, 这样就不会提示, 直接添加包含子域名的规则.另外, 双击某一条记录可以将其删除.</p><p>完成后点击PAC文件路径右边的 "Generate", 如果有勾选Use online rules from auto proxy(使用互联网共享的规则), 那么Pacgen会先从网络上获得相关规则, 再结合自定义列表生成pac文件, 否则直接根据自定义列表生成.</p><p>然后, 到这里, 就大功告成了. 你可能需要重新启动浏览器使配置生效. 如果想添加或删除自定义规则, 可以打开Pacgen, 添加或删除自定义规则后, 点击Generate生成pac文件(要使文件生效可能需要重新启动浏览器).另外, 现在的设置还不能避免DNS污染, 所以建议把连接的DNS服务器设置为Google的免费DNS服务器, 8.8.8.8和8.8.4.4. 具体方法请Google.</p><p>顺带说下子域名, 比如huxi.cqu.edu.cn就是cqu.edu.cn的子域名.</p><p>结束</p><p>希望大家现在能相对愉快地爬墙咯~</p><p>顺带说下我的推荐添加到自定义列表里的一些域名, 添加的时候请都选择包含子域名:</p><p>gstatic.comgoogleusercontent.comgoogle.comwikipedia.org</p><p>因为教程可能存在错误, 如果大家有发现请告诉我一下, 我会在原文上修改. 如果有哪位同学试验可行或不可行, 也欢迎留言.</p><p>顺带打下广告. 欢迎加我的facebook, 还有follow我的twitter. 个人博客 http://www.vilic.info.</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>