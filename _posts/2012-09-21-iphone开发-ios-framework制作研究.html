---
layout: post
title: iPhone开发：iOS Framework制作研究
---

<p>iOS上如何制作自己的Framework呢？（不是静态库）</p><p>请看stackoverflow上的提问：</p><p>http://stackoverflow.com/questions/4065052/how-to-build-a-framework-or-library-for-other-developers-the-secure-way</p><p>解决办法</p><p>1，通过命令行脚本</p><p>http://www.cocoanetics.com/2010/04/making-your-own-iphone-frameworks/</p><p>由cocoa的Framework演变而来</p><p>2，通过hack bundle</p><p>http://www.cocoanetics.com/2010/05/making-your-own-iphone-frameworks-in-xcode/</p><p>这种方法有热心的同学做了中文翻译</p><p>http://www.cocoachina.com/bbs/read.php?tid-75680.html</p><p>但是需要制作2个framework，分别对应于simulator和device</p><p>这种方法这里也有详细介绍http://db-in.com/blog/2011/05/creating-universal-framework-to-iphone-ios/</p><p>3，使用别人的模板</p><p>https://github.com/kstenerud/iOS-Universal-Framework</p><p>这个算是集大成吧。当然作者有说明，这个也是假的，并不能象SDK自带的framework那样自如使用</p><p>而code google上的pldatabase framework是可以象SDK自己的framework一样，一个framework同时运行在模拟器和真机上的</p><p>http://code.google.com/p/pldatabase/</p><p>有待研究，以后再来补充</p><p>补充：</p><p>pldatabase framework 也只是产生2个静态库（.a）然后通过lipo合并起来，但是这已经很好了。</p><p>Lipo Binary 中的脚本如下：</p><p>FRAMEWORK=&quot;${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.framework&quot;lipo \&quot;${BUILD_DIR}/${CONFIGURATION}-iphoneos/libPlausibleDatabase-iPhoneOS.a&quot; \&quot;${BUILD_DIR}/${CONFIGURATION}-iphonesimulator/libPlausibleDatabase-iPhoneSimulator.a&quot; \-create -output &quot;${FRAMEWORK}/Versions/Current/${PRODUCT_NAME}&quot;cd &quot;${FRAMEWORK}&quot; &amp;&amp; ln -sf &quot;Versions/Current/${PRODUCT_NAME}&quot; ./</p><p>看来上面的方法没有产生真正意义上的Framework，所谓的Framework不是hackbundle就是hack staticlib</p><p>至于第二种方法为什么可以实现，因为Framework其实也是一个bundle (a structured directory)，</p><p>可以参照apple的官方说明http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Framework.html</p><p>详见：http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html%23//apple_ref/doc/uid/20002303-BBCEIJFI</p><p>What are Frameworks?</p><p style="margin-top:0px; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif">Aframeworkis a hierarchical directory that encapsulates shared resources, such as a dynamic shared library, nib files, image files, localized strings, header files, and reference documentation in a single package. Multiple applications can use all of these resources simultaneously. The system loads them into memory as needed and shares the one copy of the resource among all applications whenever possible.</p><p style="margin-top:0px; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif">A framework is also a bundle and its contents can be accessed using Core Foundation Bundle Services or the Cocoa NSBundle class. However, unlike most bundles, a framework bundle does not appear in the Finder as an opaque file. A framework bundle is a standard directory that the user can navigate. This makes it easier for developers to browse the framework contents and view any included documentation and header files.</p><p style="margin-top:0px; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif">Frameworks serve the same purpose as static and dynamic shared libraries, that is, they provide a library of routines that can be called by an application to perform a specific task. For example, the Application Kit and Foundation frameworks provide the programmatic interfaces for the Cocoa classes and methods. Frameworks offer the following advantages over static-linked libraries and other types of dynamic shared libraries:</p><ul class="ul" style="list-style-type:disc; list-style-position:outside; margin-top:0px; margin-right:0px; margin-bottom:0.833em; margin-left:1.35em; padding-top:0px; padding-right:0px; padding-bottom:0.5em; padding-left:0px"><li class="li" style="margin-top:0.583em"><p style="margin-top:0.667em; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif; display:inline">Frameworks group related, but separate, resources together. This grouping makes it easier to install, uninstall, and locate those resources.</p><li class="li" style="margin-top:0.583em"><p style="margin-top:0.667em; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif; display:inline">Frameworks can include a wider variety of resource types than libraries. For example, a framework can include any relevant header files and documentation.</p><li class="li" style="margin-top:0.583em"><p style="margin-top:0.667em; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif; display:inline">Multiple versions of a framework can be included in the same bundle. This makes it possible to be backward compatible with older programs.</p><li class="li" style="margin-top:0.583em"><p style="margin-top:0.667em; margin-bottom:0.833em; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif; display:inline">Only one copy of a framework’s read-only resources reside physically in-memory at any given time, regardless of how many processes are using those resources. This sharing of resources reduces the memory footprint of the system and helps improve performance.</p><p style="margin-top:0.583em; margin-bottom:0px; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif">Note:Frameworks are not required to provide a programmatic interface and can include only resource files. However, such a use is not common.</p><p style="margin-top:0.583em; margin-bottom:0px; font:normal normal normal 100%/normal 'Lucida Grande',Geneva,Helvetica,Arial,sans-serif"></p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>