---
layout: post
title: Red Hat Enterprise 5  server 上安装 memcached 的问题记录
---

<p>此文档同步发布于： http://blog.csdn.net/alonesword/</p><p>Red Hat Enterprise 5 server 上安装 memcached 的问题记录</p><p>参考的安装文档：http://www.linuxsir.org/main/node/184</p><p>1 所有工具的安装，选择具有管理员权限的用户进行</p><p>2 工具的版本：</p><p>名称</p><p>版本</p><p>下载地址</p><p>memcached</p><p>1.4.13</p><p>http://memcached.org/</p><p>libevent</p><p>2.0.16-stable</p><p>https://github.com/downloads/libevent/libevent/libevent-2.0.16-stable.tar.gz</p><p>3 遇到的问题及解决方法</p><p> i. 安装memcache 时提示需要安装libevent</p><p>直接G一下，下载 2.0.16-stable，依次执行</p><p>tar zxvf libevent-2.0.16-stable.tar.gz</p><p>cd ./libevent-2.0.16-stable</p><p>./configure</p><p>make install clean</p><p>经过上述步骤，根据执行的结果得知libevent 被安装到： /usr/local/lib 中</p><p>【说明】也可通过 ls &ndash;aR | grep libevent 找到路径地址。结果如下，表示已安装了</p><p> ii. 执行memcached 的make 时，出现错误：</p><p>error: `IOV_MAX' undeclared (first use in this function)</p><p>网上搜索到的答案，忘记地址了，&gt;_&lt; 汗一个</p><p>【原因】 memcache.c 对该系统 red hat enterprise 5 server 的侦测错误，导致宏 IOV_MAX 未定义</p><p>【解决方法】 手动修改文件 memcache.c，定义 IOV_MAX</p><p>【实施步骤】 用vi打开memcache.c 文件，注释掉57及59行，修改结果如下</p><p>【技巧】打开vi后，可用set nu 打开行号标签</p><p> iii. 启动memcached 时，提示找不到libevent 库位置</p><p>memcached: error while loading shared libraries: libevent-2.0.so.5: cannot open shared object file: No such file or directory</p><p>【原因】使用 LD_DEBUG=libs /usr/local/bin/memcached &ndash;v 可查看库文件的搜索路径，memcached 要求libevnet 的路径是 /usr/lib/libevent.2.0.so.5，</p><p>而libevent 实际安装路径为：/usr/local/bin/libevent.2.0.so.5</p><p>【解决方法】想办法让memcached 找到libevent的安装路径</p><p>【操作方法】根据网上的说法，找到几种方法，最简单的是软连接</p><p>1、 建立软连接</p><p>#ln -s /usr/local/lib/libevent.2.0.so.5 /usr/lib/libevent.2.0.so.5</p><p>缺点：只对当前用户有效</p><p>2、 建立 memcached.conf 文件并注册</p><p>【说明】此方法并未测试，网上见到的</p><p align="left"> 步骤1：cd /etc/ld.so.conf.d。</p><p align="left">步骤2：vi memcached.conf 这里的memcached.conf是不存在的，是我自己创建的。</p><p align="left">步骤3：在memcached.conf理添加一行 /usr/local/lib表示libevent-1.4.so.2的路径。</p><p>步骤4：ldconfig表示向系统注册配置文件</p><p>Ok，解决掉上述问题后，memcached 即可启动了</p><p>enjoy it!</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>