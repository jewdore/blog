---
layout: post
title: Mercurial与TortoiseHg使用入门教程
---

<p align="center"><strong style="font-size: 18pt;">Mercurial与TortoiseHg使用入门教程</p><p>转载：http://www.cnblogs.com/meetrice/archive/2010/07/12/1775707.html</p><p> 分布式版本管理工具当中，Git和Mercurial（意思为水银的，于是经常缩写为Hg）是最为流行的工具。大名鼎鼎的Linux就用Git作源码管理，而Python和Firefox则采用Hg（你可以在这找到一堆使用Hg的项目）。</p><p>1.为何要用分布式配置管理(原因参考：http://wiki.woodpecker.org.cn/moin/DistributedScm)</p><p>2.为何选择Mercurial</p><p>因为Git的优势主要在于分支，而汉化并不需要太多分支；而Git对Windows的支持似乎不如 Mercurial，ssh也比http麻烦，比较难教汉化组成员们使用；此外还有个特别的原因：Hg主要是用Python实现的（小部分使用C实现）。Hg也有个很严重的缺点：不支持针对单个文件夹的分支。如果剧本翻译和改图要建立分支都必须复制整个仓库，而对翻译来说，图像文件并不是他需要的部分。</p><p>附：Google还发了篇《Analysis of Git and Mercurial》，说明为什么Google Code决定支持Hg，而不支持Git。</p><p>Git的优势：</p>    客户端存储控制。可以删除任意的版本，而无需考虑该分支的后续版本，而Hg做不到。     无限的父结点数。Hg一次只能分成2个分支，合并N个分支要进行很多次操作。而Git没有限制。     支持rebase。它可以将当前版本移到最新的分支去。例如假设有个本地库在开发1.0的新特性，而基线已经升级到1.1了；一般情况下是需要合并到1.1去的，而rebase可以避免这种操作。<p>Hg的优势：</p>    学习曲线。由于很多因素，Git比Hg的学习曲线更陡峭。     支持Windows。     维护。Git需要定期维护。     历史是不可侵犯的。Git很强大，可以干几乎任何事，因此也会丢失历史信息。<p> 看起来Git在技术上是要强于Hg的，不过由于文件操作的实现依赖于操作系统，移植到Bigtable会存在麻烦；而且Hg有很好的基于HTTP的无状态pushing和pulling，容易与Google的构架整合（Google几乎所有的服务都基于HTTP）。对于这点，Google还特意提供了测试数据，指出在使用HTTP时，Git比Hg慢1个数量级。（提到了2个数字，分别慢22倍和12倍。）</p><p><strong style="font-size: 14pt;">3.哪里可以免费托管代码：</p>    GitHub：这个网站非常出名，是用RoR建的，300MB的免费空间，支持Git，但不支持Hg（虽然有插件，但教别人用太麻烦），而且没有私有库。     bitbucket：这个是用Django建的，可以建1个私有库，150MB的免费空间，支持Hg。     ProjectLocker：只有（无限个）私有库，500MB的免费空间，支持SVN和Git，但只能有5个用户。闭源项目推荐，但显然不适合庞大的tomo汉化组。     Unfuddle：200MB的免费空间，支持SVN和Git，只能有1个库和2个用户。<p>最终我选择了最小的bitbucket，因为也差不多够用了。（注：Google Code现已支持Hg，但只能托管源码，不能用于其他目的，所以我只能放弃。但如果你是开源软件开发，那么Google Code是最大方的，还可以发信申请扩大配额，只是偶尔会被GFW。）</p><p>4.TortoiseHg的安装</p><p> 接着就开始装软件了。习惯了SVN的乌龟，所以仍然选择了乌龟汞（TortoiseHg）。目前这个版本支持Windows XP、Vista和Windows 7，所以不担心兼容性。安装很简单，装好后要重启（其实不重启也可以用）。喜欢命令行的还可以在CMD里输入hg试试。</p><p>5.让TortoiseHg界面显示中文</p><p> 需要建一个&#8220;LANGUAGE&#8221;环境变量（在系统属性里），值为&#8220;zh_CN&#8221;。</p><p>接着还得去这个文件夹：C:\Program Files\TortoiseHg\cmenu_i18n，导入thg-cmenu-zh_CN.reg文件。修改之后，软件界面和命令行（hg和hgtk）就已经是中文了，但右键菜单还是英文，重启或注销即可变成中文。</p><p><strong style="font-size: 14pt;">6.Mercurial基本操作</p>    在使用前，建议看看《Mercurial 使用教程》，了解下几个术语。Init是指初始化，也就是创建一个空的仓库。    Clone是指创建仓库的复本，创建的来源可以是一个http或ssh链接表示的仓库，也可以是本地仓库。    Commit是指提交，即接受所有的改动，将当前版本作为最新版本（也叫tip）。注意这个提交和集中式SCM不同，它只提交的本地仓库，而且本地仓库会 详细记录所有的变动（称为变更集或改动集）。因此不用客气，多提交几次也没关系，因为不影响别人的仓库。而如果怕影响自己的话，可以clone一个复本， 再对复本进行改写和提交。    Revert是指恢复，即撤销所有的改动，恢复到未更改的状态。右键菜单里你是找不到它的，原因后面再提。    Pull的意思是拉，是将其他仓库有，而当前仓库没有的变更集&#8220;下载&#8221;到当前仓库。不过这只是添加了变更集，文件并不会改动。（变更集有一个唯一的hash标识，所以很容易区分。）    Update的意思就是更新，当获取了其他变更集，且需要更改以保持和其他仓库一致时，就可以执行它了。    Push的意思是推，就是将当前仓库的变更集&#8220;上传&#8221;到其他仓库去。其他仓库必须支持该操作，并可能需要经过验证。如果是从本地仓库A push到本地仓库B，就相当于用B pull A。此外，push也不会更新仓库的版本，因为它是共享的，需要的人直接选择想要的版本即可。    Merge就是指合并。当一个文件同时被多次修改，并存放在多个仓库时，要获得一个统一的版本，就需要合并。对于翻译而言，一个文本可能同时会分给多个人，于是合并时只需要接受每个人的改动即可。<p>如果你还想了解更多，可以读读《Mercurial: The Definitive Guide》。</p><p>这些术语介绍完后，就可以看看别人写的使用方法了：Git Vs Mercurial hg? 异地协同开发，分布式SCM方案选择！CodeBeamer+Mercurial实务操作手册当然，那个PDF文档也是很有用的资料。</p><p>不过为了汉化组的同志们，我还是截图说明如何进行完整的操作吧。</p><p>首先去我的bitbucket主页，找到FamilyProject这个项目。下面会有一些提示：</p><p>引用:</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>