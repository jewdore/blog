---
layout: post
title: 分布式文件存储的数据库开源项目MongoDB
---

<p>MongoDB是一个基于分布式文件存储的数据库开源项目。由C++语言编写。旨在为WEB应用提供可护展的高性能数据存储解决方案。</p><p>它的特点是高性能、易部署、易使用，存储数据非常方便。主要功能特性有：</p>面向集合存储，易存储对象类型的数据。模式自由。支持动态查询。支持完全索引，包含内部对象。支持查询。支持复制和故障恢复。使用高效的二进制数据存储，包括大型对象（如视频等）。自动处理碎片，以支持云计算层次的扩展性支持RUBY，PYTHON，JAVA，C++，PHP等多种语言。文件存储格式为BSON（一种JSON的扩展）可通过网络访问<p>所谓&ldquo;面向集合&rdquo;（Collenction-Orented），意思是数据被分组存储在数据集中，被称为一个集合（Collenction)。每个集合在数据库中都有一个唯一的标识名，并且可以包含无限数目的文档。集合的概念类似关系型数据库（RDBMS）里的表（table），不同的是它不需要定义任何模式（schema)。</p><p>模式自由（schema-free)，意味着对于存储在mongodb数据库中的文件，我们不需要知道它的任何结构定义。如果需要的话，你完全可以把不同结构的文件存储在同一个数据库里。</p><p>存储在集合中的文档，被存储为键-值对的形式。键用于唯一标识一个文档，为字符串类型，而值则可以是各中复杂的文件类型。我们称这种存储形式为BSON（Binary Serialized dOcument Format）。</p><p>MongoDB服务端可运行在Linux、Windows或OS X平台，支持32位和64位应用，默认端口为27017。推荐运行在64位平台，因为MongoDB在32位模式运行时支持的最大文件尺寸为2GB。</p><p>MongoDB把数据存储在文件中（默认路径为：/data/db），为提高效率使用内存映射文件进行管理。</p><p>在Windows下安装：</p><p>1、 到http://www.mongodb.org/display/DOCS/Downloads 下载32位或者64位版本文件</p><p>2、 解压缩文件，例如我解压到E:\Workshop\No SQL\mongodb-win32-i386-1.4.2\</p><p>3、 WINDOWS会存放在C:\data\db下。可以在启动时使用--dbpath参数指定存储目录并启动。创建数据目录E:\Workshop\No SQL\mongodb-win32-i386-1.4.2\bin\data\db 如：E:\Workshop\NoSQL\mongodb-win32-i386-1.4.2\bin&gt;"E:\Workshop\No SQL\mongodb-win32-i386-1.4.2\bin\mongod.exe" --dbpath .\data\db</p><p>启动数据库</p><p>现在我们就可以使用自带的shell工具来操作数据库了. (我们也可以使用各种编程语言的驱动来使用MongoDB, 自带的shell工具可以方便我们管理数据库)</p><p>&ldquo;connecting to:&rdquo; 这个会显示你正在使用的数据库的名称. 想换数据库的话可以: use mydb</p><p>使用.NET操作MongoDB非常简单，从github.com/samus/mongodb-csharp下载.NET的驱动，在项目中引用驱动的程序集就可以了。</p><p>要建立MongoDB的连接，你只要指定要连接到的数据库就可以。这个数据库不一定存在，如果不存在，MongoDB会先为你建立这个库。同时，在连接时你也可以具体指定要连接到的网络地址和端口。</p><p>string connstr = ConfigurationManager.AppSettings["simple"];</p><p>if (String.IsNullOrEmpty(connstr)) throw new ArgumentNullException("Connection string not found.");</p><p>Mongo mongo = new Mongo(connstr);</p><p>mongo.Connect();</p><p>配置</p><p>&lt;?xml version="1.0" encoding="utf-8" ?&gt;</p><p>&lt;configuration&gt;</p><p>&lt;appSettings&gt;</p><p>&lt;add key="simple" value="Server=localhost:27017"/&gt;</p><p>&lt;/appSettings&gt;</p><p>&lt;/configuration&gt;</p><p>每个数据库都存在零个或多个集合，需要时你可以获得他们的列表：</p><p>Database simple = mongo["simple"];</p><p>List&lt;string&gt; collectionNames = simple.GetCollectionNames();</p><p>要获得某个特定集合，你可以指定集合的名字，并使用GetCollection()方法或者使Index：</p><p>IMongoCollection categories = simple.GetCollection("categories");</p><p>IMongoCollection categories = simple["categories"];</p><p>当你获取了这个集合对象，你就可以对数据进行增删查改之类的操作。</p><p>当你获得了一个集合对象，你就可以把文档插入到这个对象中。</p><p>var names = new string[] { "Bluez", "Jazz", "Classical", "Rock", "Oldies", "Heavy Metal" };</p><p>foreach (string name in names)</p><p>{</p><p>categories.Insert(new Document() { { "name", name } });</p><p>}</p><p>要查找我们上一步插入的那个文档，可以简单地使用findOne()操作来获取集合中第一个文档。这个方法返回一个单一文档.</p><p>var category = categories.FindOne(new Document { { "name", "Bluez" } });</p><p>Console.WriteLine("The id findOne" + category["_id"]);</p><p>为了平时使用方便，把mongod注册为系统服务 "D:\Workshop\Mongo\mongodb-win32-x86_64-2.0.3\bin\mongod" --dbpath "D:\Workshop\Mongo\mongodb-win32-x86_64-2.0.3\data" --logpath "D:\Workshop\Mongo\mongodb-win32-x86_64-2.0.3\log\mongodblog.log" --service --serviceName MongoDB</p><p>#注册为系统服务修改服务的端口 D:\mongodb\bin\mongod &ndash;-dbpath &ldquo;D:\data&rdquo; &ndash;-port 10001</p><p>修改注册表，把&mdash;install 改成&mdash;service</p><p>MongoDB : Windows Service</p><p>mongodb小结</p><p>Going NoSQL with MongoDB</p><p>http://cookbook.mongodb.org/</p>关于MongoDB在64位服务器上依然报 mmap failed with out of memory 错误的解决方法（附Mysql性能对比测试）<p>通过 MongoDB 使用 NoSQL</p><p>http://msdn.microsoft.com/zh-cn/magazine/ee310029.aspx</p><p>http://msdn.microsoft.com/zh-cn/magazine/ff714592.aspx</p><p>http://msdn.microsoft.com/zh-cn/magazine/ff798277.aspx</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>