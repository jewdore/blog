---
layout: post
title: Installing GitLab 2.1 on Centos 6
---

<p>Step 1: Install needed packages</p><p>you will need remove installed ruby because repo version is 1.8.7 and we need 1.9 at least</p><blockquote><p>yum remove ruby</p><p>yum install wget</p></blockquote><p>enable epel repos</p><blockquote><p>wget http://download.fedoraproject.org/pub/epel/6/i386/epel-release-6-5.noarch.rpm</p><p>rpm -Uvh epel-release-6-5.noarch.rpm</p></blockquote><p>install required libraries</p><blockquote><p>yum install readline-devel libyaml-devel gdbm-devel ncurses-devel redis openssl-devel zlib-devel gcc gcc-c++ make autoconf readline-devel curl-devel expat-devel gettext-devel tk-devel libxml2-devel libffi-devellibxslt-devel libicu-devel httpd httpd-devel gitolite git-all python-devel python-pip sqlite-devel sendmail vim mysql-devel</p></blockquote><p>Step 2: Install Ruby 1.9.3</p><p>wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p0.tar.gz</p><p>tar xzvf ruby-1.9.3-p0.tar.gz</p><p>cd ruby-1.9.3-p0</p><p>./configure</p><p>make</p><p>make install</p><p>Step 3: Install gitolite</p><p>Create gitolite-admin user</p><blockquote><p> useradd -d /home/gitolite-admin gitolite-admin</p></blockquote><p>generate RSA key pair for gitolite-admin user</p><blockquote><p>su gitolite-adminssh-keygenexit</p></blockquote><p>Move generate public key to gitolite home dir</p><blockquote><p>cp /home/gitolite-admin/.ssh/id_rsa.pub /var/lib/gitolite/id_rsa_gitolite_admin.pubchown gitolite:gitolite /var/lib/gitolite/id_rsa_gitolite_admin.pub</p></blockquote><p>complete gitolite and gitolite-admin users pairing</p><blockquote><p>su gitolitegl-setup /var/lib/gitolite/id_rsa_gitolite_admin.pub</p></blockquote><p>a editor will opened changue repo permissions to 0007</p><blockquote><p>$REPO_UMASK to 0007exitsu gitolite-admincdgit clone gitolite@localhost:gitolite-admin</p></blockquote><p>in the last command you clone the gitolite-admin repo on gitolite-admin&rsquo;s home. Gitolite-admin repo is gitolite config</p><p>before continue we need configure gitolite-admin git profile</p><blockquote><p>git config &ndash;global user.email &ldquo;gitolite-admin@localhost&rdquo;git config &ndash;global user.name &ldquo;gitolite-admin&rdquo;exit</p></blockquote><p>add gitolite-admin to gitolite group</p><blockquote><p>usermod -a -G gitolite gitolite-admin</p></blockquote><p>changue gitolite-admin password</p><blockquote><p>passwd gitolite-admin</p></blockquote><p>Step 6 Launch Redis</p><blockquote><p>chkconfig redis on</p><p>/etc/init.d/redis start</p></blockquote><p>Step 7 GitLab</p><p>Clone GitLab sourcecode</p><blockquote><p>cd /var/www</p><p>git clone git://github.com/gitlabhq/gitlabhq.git</p><p>chown -R gitolite-admin:gitolite-admin gitlabhq/</p><p>cd gitlabhq/</p></blockquote><p>Install phython dependencies</p><blockquote><p>pip-python install pygments</p></blockquote><p>Install required gems</p><blockquote><p>gem install bundler</p><p>bundle install</p><p>su gitolite-admin</p><p>bundle install</p></blockquote><p>Prepare config files</p><p>cp config/database.yml.example config/database.yml</p><p>cp config/gitlab.yml.example config/gitlab.yml</p><p>Prepare production enviroment</p><blockquote><p>RAILS_ENV=production rake db:setupRAILS_ENV=production rake db:seed_fu</p></blockquote><p>you will get these login data</p><p>login&hellip;&hellip;&hellip;admin@local.hostpassword&hellip;&hellip;5iveL!fe</p><p>Config gitolite gitlab link</p><p>vim config/gitlab.yml</p><p>your git_host: section must be like this</p><blockquote><p># Git Hosting congigurationgit_host:system: gitoliteadmin_uri: gitolite@localhost:gitolite-adminbase_path: /var/lib/gitolite/repositories/host: localhostgit_user: gitolite# port: 22</p></blockquote><p>fix gitolite permissions</p><blockquote><p>chmod -R 770 /var/lib/gitolite/repositories/</p></blockquote><p>try your installation launching webrick</p><blockquote><p>bundle exec rails s -e production</p></blockquote><p>open a web broser, write yourhost:3000 and check if everything is working if you get an error send me a comment</p><p>Install passenger for Apache</p><p>gem install passengerpassenger-install-apache2-module</p><p>follow screen instructions</p><p>edit apache config file</p><p>vim /etc/httpd/conf/httpd.conf</p><p>and append these lines at the end</p><p>LoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.11/ext/apache2/mod_passenger.soPassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.11PassengerRuby /usr/local/bin/ruby</p><p>enable apache service</p><p>/etc/init.d/httpd start</p><p>chkconfig httpd on</p><p>Sources</p><p>http://wasil.org/en/gitlab-installation-on-fedora-16-with-gitolite</p><p>http://rickfoosusa.blogspot.com/2011/08/gitolite-tutorial-senawario.html</p><p>source http://luzem.dyndns.org/2012/03/12/installing-gitlab-2-1-on-centos-6/</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>