---
layout: post
title: MongoDB初体验-C#(转)
---

<p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">我觉得我们把关系型数据库当作铁榔头一样频繁使用的工具了，在软件开发过程中遇到的各种数据存储几乎都离不开关系型数据库(译者注:mysql,ms sql等).经过数年设计优化，性能、安全性以及可管理性的提升，现在的关系型数据库显然已是软件工程进程中的非凡成就。然而关系型数据库在某些数据存储应用场景上却并非最佳选择。</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">之前的几个月我一直在关注&#8221;no-sql&#8221;数据存储（译者注:大概指的就是非关系统数据库）的发展。我想参加一个No-SQL的会议(nosqleast-他们的口号是：select fun,profit from real_world where relational=false),在此之前不得不等待Matt.P(译者注：可能是会议的组织成员)的咨询结果。如下是一些关于no-sql这个东东的不错的文章：</p><ul style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; "><li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; list-style-type: none; list-style-position: initial; list-style-image: initial; ">Dare Obasanjo:Building Scalable Databases: Denormalization, the NoSQL Movement and Digg<li style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; list-style-type: none; list-style-position: initial; list-style-image: initial; ">Eric Florenzano:My Thoughts on NoSQL<p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; "></p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">我想亲自体验一下文档型数据库，于是选择了MongoDB，从它的FAQ页面上可窥其一斑：</p><blockquote style="margin-top: 10px; margin-right: 0px; margin-bottom: 10px; margin-left: 25px; padding-top: 5px; padding-right: 10px; padding-bottom: 5px; padding-left: 10px; background-image: none; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: initial; border-top-width: 2px; border-right-width: 2px; border-bottom-width: 2px; border-left-width: 2px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: #efefef; border-right-color: #efefef; border-bottom-color: #efefef; border-left-color: #efefef; color: #333333; background-position: initial initial; background-repeat: initial initial; "><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">MongoDB是一种文档型的数据库管理系统。你可以把它当作是持久对象的储物所，它既不是关系型的，也不像&#8220;Amazon SimpleDB&#8221;或&#8220;Google BigTable&#8221;一样是&#8220;面向数据表&#8221;的。如果此前你在你的程序中使用过ORM工具，你将会发现MongoDB提供的api很类似，容易上手但功能更强。</p></blockquote><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">我选择MongoDB是因为它看起来配置简单易用..,如下：</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">1，从MongoDB上下载并解压文件</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">2，建个文件：c:\data\db (默认数据存储目录&#8211;可以更改)</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">3，运行mongod.exe</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">至于在程序里面与mongoDB进行通讯，我使用mongodb-csharp。你可以直接下载源码压缩包，也可以使用git客户端如Git On Windows(译者注:git为一种流行的源码管理方式)从github网站上拷贝源码。使用git虽然听起来有点麻烦，但上手后便会非常方便，而且通过git获取最新源码是非常快的。下载好源码后用vs编译一下得到一个叫MongoDB.Driver的程序集，有了这个程序集便可以在你的c#项目中使用MongoDB了：</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">在程序中链接到MongoDB如下：</p><pre class="csharpcode" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; font-size: small; color: black; font-family: consolas, 'Courier New', courier, monospace; background-color: #ffffff; ">var mongo = new Mongo();mongo.Connect();var db = mongo.getDB("movieReviews");</pre><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">我在本地电脑上使用MongoDB,它监听的是安装时设定的默认端口，不需要特别的安全设置。所以链接MongoDB的代码才如此简单，上面的代码中，我获取一个叫&#8220;movieReviews&#8221;的数据库，如果它不存在的话MongoDB会自动创建一个。我不需要建表，也不用设置主键什么的。使用文档型数据库和关系型数据库的感觉就犹如使用动态语言和静态语言一样的感觉。（译者注：可以把js当作是动态语言,c#当成是动态语言）。</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; text-indent: 0px; ">下一步就是获取或创建一个列表(collection)，并且为这个列表添加文档(document)啦：</p><code style="margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; padding-top: 0px !important; padding-right: 0.3em !important; padding-bottom: 0px !important; padding-left: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; border-left-width: 0px !important; border-style: initial !important; border-color: initial !important; outline-width: 0px !important; outline-style: initial !important; outline-color: initial !important; background-image: none !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; background-color: initial !important; text-align: right !important; float: none !important; vertical-align: baseline !important; position: static !important; left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: 2.7em !important; line-height: 1.1em !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 1em !important; min-height: inherit !important; display: block !important; background-position: initial initial !important; background-repeat: initial initial !important; ">1</code><code class="plain" style="margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; padding-top: 0px !important; padding-right: 0px !important; padding-bottom: 0px !important; padding-left: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; border-left-width: 0px !important; border-style: initial !important; border-color: initial !important; outline-width: 0px !important; outline-style: initial !important; outline-color: initial !important; background-image: none !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; background-color: initial !important; text-align: left !important; float: none !important; vertical-align: baseline !important; position: static !important; left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 1em !important; min-height: inherit !important; color: #000000 !important; background-position: initial initial !important; background-repeat: initial initial !important; ">var movies = db.GetCollection(</code><code class="string" style="margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; padding-top: 0px !important; padding-right: 0px !important; padding-bottom: 0px !important; padding-left: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; border-left-width: 0px !important; border-style: initial !important; border-color: initial !important; outline-width: 0px !important; outline-style: initial !important; outline-color: initial !important; background-image: none !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; background-color: initial !important; text-align: left !important; float: none !important; vertical-align: baseline !important; position: static !important; left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 1em !important; min-height: inherit !important; color: blue !important; background-position: initial initial !important; background-repeat: initial initial !important; ">"movies"</code><code class="plain" style="margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px !important; padding-top: 0px !important; padding-right: 0px !important; padding-bottom: 0px !important; padding-left: 0px !important; border-top-width: 0px !important; border-right-width: 0px !important; border-bottom-width: 0px !important; border-left-width: 0px !important; border-style: initial !important; border-color: initial !important; outline-width: 0px !important; outline-style: initial !important; outline-color: initial !important; background-image: none !important; background-attachment: initial !important; background-origin: initial !important; background-clip: initial !important; background-color: initial !important; text-align: left !important; float: none !important; vertical-align: baseline !important; position: static !important; left: auto !important; top: auto !important; right: auto !important; bottom: auto !important; height: auto !important; width: auto !important; line-height: 1.1em !important; font-family: Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important; font-weight: normal !important; font-style: normal !important; font-size: 1em !important; min-height: inherit !important; color: #000000 !important; background-position: initial initial !important; background-repeat: initial initial !important; ">);</code>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>