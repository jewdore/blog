---
layout: post
title: TreeSaver 使用教程整理&mdash;&mdash;Step 1: Getting Started
---

<p>TreeSaver 介绍</p>  <p>Treesaver 是一个开源的JavaScript 框架，用来创建杂志风格的网页布局。</p>  <p>&#160;</p>  <p>为何要整理这个系列的文章</p>  <p>下面的教程整理自： https://github.com/Treesaver/treesaver/wiki/Walkthrough ， 也许是这个框架目前才刚刚起步，它的文档很成问题，文档中一些链接不能下载，源代码中欠缺一些必要的内容，导致源代码的例子无法运行等等。我在摸索这个框架时碰了很多弯路，整理这篇文档，就是为了避免后来人也碰弯路。</p>  <p>&#160;</p>    <p>环境准备</p>  <p>1、下载 treesaver-0.9.2.js</p>  <p>TreeSaver 使用了Google的 Closure 工具包，这让我们编译TreeSaver的源码造成了很大复杂性，我就在这里花费了大量时间，结果还是没有弄好它的环境。</p>  <p>这里我们简单起见，先只用它预先编译好的脚本库，这个脚本库下载地址如下：    https://github.com/treesaver/treesaver/downloads</p>  <p> </p>  <p>&#160;</p>  <p>如上图所示， treesaver-0.9.2.js 是运行版本，treesaver.js 是带调试信息和注释的。按需下载你所需要的版本。这里我们使用的是：treesaver-0.9.2.js </p>  <p>为了随后演示的方便，我们的目录组织如下：</p>  <pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 298px; padding-right: 5px; height: 140px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px"><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">[Treesaver Walkthrough Directory]</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">|- treesaver-0.9.2.js</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">|- img/</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">|- step1/</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">|- step2/</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">   ...</pre></pre><p>treesaver-0.9.2.js 文件和通用图片目录我们放在外层，</p><p>每一步的演示我们一个目录存放对应的一些文件；这个目录一般会有下面三个文件：</p>  文章内容文件，我们一般是 Index.html 文件；   定义布局的资源文件： resources.html   定义样式的样式文件： style.css <p>&#160;</p><p>本文演示的是最简单TreeSaver的搭配，所以本文演示并没有通用图片。即上面的 img 目录是空的</p><p>&#160;</p><p>index.html 文件的内容：</p><pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 1011px; padding-right: 5px; height: 347px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px"><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;!doctype html&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;html class=&quot;no-js no-treesaver&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;head&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;meta charset=&quot;utf-8&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1&quot;&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;title&gt;Sample Treesaver Page&lt;/title&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;link rel=&quot;resources&quot; href=&quot;resources.html&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;script src=&quot;../treesaver-0.9.2.js&quot;&gt;&lt;/script&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;/head&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;body&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;article&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">      &lt;p&gt;This markup is an example of a page using Treesaver for layout. It is not very exciting right now.&lt;/p&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;/article&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;/body&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;/html&gt;</pre></pre><p>说明：</p>  确保 Treesaver 的 &lt;script&gt; 标签是在Treesaver的资源文件和样式文件之后。这么做是为了确保IE8能妥善的处理好HTML5的标签。此外这点也可以在脚本和资源文件下载上让用户体验比较好。    Make sure the Treesaver &lt;script&gt; tag is the final element in the &lt;head&gt;, after the link to the Resources file and any stylesheets. This is required in order to ensure the IE8 and below properly process HTML5 tags. Additionally, this improves the user experience by letting the library download scripts in resources in parallel.    即注意如下的先后顺序：      &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;    &lt;link rel=&quot;resources&quot; href=&quot;resources.html&quot;&gt;    &lt;script src=&quot;../treesaver-0.9.2.js&quot;&gt;&lt;/script&gt;     不要删除&lt;meta name=&quot;viewport&quot;&gt;标签，如果删除了，你在iPhone和Android上会看到比较怪异的结果。    Do not remove the &lt;meta name=&quot;viewport&quot;&gt;, otherwise you will end up with very strange results on iPhone and Android  最好使用HTML5 doctype定义:     Always Declare the HTML5 doctype: The XHTML doctype is also usable, as long as Quirks mode processing is not triggered  把我们的内容放在&lt;article&gt;标签之内，任何这个标签之外的都将被忽视，在最终显示上都将被删除。如果你的浏览器是不支持的旧浏览器，则可以借用这个特性来实现兼容旧浏览器。    Place content within an &lt;article&gt; tag: Any content outside the tag is ignored, and will be completely removed when performing layout. You can use that in order to present to content to older browsers, if desired (see Content Format for alternatives).<p>&#160;</p><p>resources.html 文件的内容：</p><pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 312px; padding-right: 5px; height: 425px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px"><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;!doctype html&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;html&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;body&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;div class=&quot;chrome&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">      &lt;div class=&quot;viewer&quot;&gt;&lt;/div&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;/div&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;div class=&quot;grid&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">      &lt;div class=&quot;column&quot;&gt;&lt;/div&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;/div&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;div class=&quot;loading&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">      Loading</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;/div&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;div class=&quot;error&quot;&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">      Error</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">    &lt;/div&gt;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  &lt;/body&gt;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">&lt;/html&gt;</pre></pre><p>说明：</p>  &lt;head&gt;, &lt;title&gt; 等其他内容标签在模板文件上是可选的,Treesaver 不使用这些标签,你可以省略他们.    &lt;head&gt;, &lt;title&gt; and other contents are optional. They are not used by Treesaver and can be omitted completely.    &#160;<p>style.css 文件的内容：</p><pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 486px; padding-right: 5px; height: 810px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px"><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">.treesaver body {</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  /* Hide scrollbars */</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  overflow: hidden;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  /* Use full body canvas */</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  margin: 0;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  border: 0;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  padding: 0;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">}</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">.chrome, .viewer, .grid, .column, .container {</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  /* Manually position everything */</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  position: absolute;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  /* Make sure seams aren't visible */</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  overflow: hidden;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  /* Set the base vertical grid */</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  line-height: 20px;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">}</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">/* Stretch the viewer to fill the screen */</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">.viewer {</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  top: 0;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  bottom: 0;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  left: 0;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  right: 0;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">}</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">.grid {</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  width: 300px;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  border: 1px solid #ccc;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  margin: 9px;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">}</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px"></pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">.column {</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  width: 280px;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  top: 5px;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  bottom: 5px;</pre><pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">  left: 5px;</pre><pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,&#39;Courier New&#39;,courier,monospace; font-size: 12px">}</pre></pre><p>说明：</p>  这是一个非常简单丑露的样式, 这只是我们学习 treesaver的出发点。    This is a bare-bones starting point, it will look quite ugly<p>&#160;</p><p>上面演示的效果：</p><p> </p><p>这里我们把 index.html 文件的内容放的很少，就是上面的效果。</p><p>如果我们把index.html文件的内容放多一些，比如我们把下面这篇英文小说其中几段放入： http://www.gutenberg.org/files/11/11-h/11-h.htm 就会看到如下效果：</p><p> </p><p>这里使用英文小说，是为了避免编码问题导致乱码的情况。</p><p>&#160;</p><p>中文乱码的问题</p><p>如果我们没做一些处理，我们把中文文章放入其中，显示的效果如下，乱码：</p><p> </p><p>解决方法，我们用记事本打开step目录下的内容文件，把它的编码修改为UTF-8即可：</p><p> </p><p>&#160;</p><p>参考资料：</p><p>https://github.com/Treesaver/treesaver/wiki/Boilerplate</p><p>https://github.com/Treesaver/treesaver/wiki/Walkthrough</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>