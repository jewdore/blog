---
layout: post
title: 自己动手开发编译器（零）序言
---

<p>好久没写博客了，一来是自己懒，二来是最近一段时间都没有做什么自己认为可以分享的东西。这几天刚好重拾了一个一直打算做但没做的编译器类库，算是积累了一点小小的经验吧。本来我已经发到了Github上，也在微博上零星介绍了一些，但是我最终意识到，如果不写一个详细的文档，别人就不能容易地学习、了解和使用它。甚至于我自己也可能会把这次研究出来的小小成果给忘了。所以，必须下决心动一动笔头，也算是对老长时间不些博客的弥补吧。</p> <p>本篇是系列的第零篇，我首先要介绍一下些这个系列的目的。从很久以来，编译器的技术就是计算机科学的基础。我想编程语言在大家软件开发生活中的重要性不言而喻。那么，为什么我们需要了解编译器内部的原理呢？有很多原因：首先，编译原理是一门经过长期实践完善的理论，它涵盖了很多算法，都是非常经典的算法。从前端到后端，编译器设计到的很多算法，都很强大、快速。比如我们经常要用到的正则表达式解析字符串的算法。通过学习编译原理，可以更加深刻地理解和应用这些算法。比如明白正则表达式能够表示何种语言，不能表示何种语言，何时性能最好，何时性能不好等，这样就能够在实践中更加科学地加以采用。其次，我们处在一个编程语言爆发的时代，我们所熟悉的语言每个版本都有新特性，更不要说各种新型语言、脚本、DSL和其他基于格式化文本的协议层出不穷。掌握一些编译原理的知识能让我们在这个时代更具有主动性。大家都知道，老赵最近开发的Jscex，它给javascript引入了优美的异步编程模型。相信大家不仅想崇拜老赵，更想知道为什么他能开发出这种创新的技术吧？其实很多知识就来自于编译原理。最后，我想说下我自己的学习目的。大家最近都知道C#5就快要出来了，在感叹变化之快的同时，是否也有一丝遗憾，那就是自己心目中的语言特性还是没有出现在C#5中呢？我相信各位有些人对编程语言的发展是感兴趣的，那么就不要停留在对各个语言特性品头论足的阶段了，动手来实现自己心中的想法吧！只有实践，才能知道自己的想法是不是对的，是不是有价值。实践是最好的学习方式。我想各位起码在大学期间都学过了编译原理这门课程，但是还有许多实际问题值得挑战，比如C#和VB等语言的源文件里支持中文，甚至变量和函数都可以用中文，那么怎么做才能在编程语言里支持中文？在大学学习的时候，也许没有处理过面向对象语言，那么面向对象语言有什么不同？有很多重载方法的时候，如何挑选一个最合适的？甚至再进阶一步可以考虑如何实现一个支持泛型的编程语言？Lambda表达式捕获变量是怎么做到的等等。至于编译器后端，那更是一个广阔的话题，涉及的技术可能帮助你深入操作系统和硬件的内部。</p> <p>在一般人眼里，编译原理是个比较难掌握的理论体系。首先必须承认编译器涉及的技术非常广泛，每一种又可以非常深入，确实像个无底洞。所以这次我采用一个实际的例子，编写一个简单但具有基本功能的编程语言，在这个过程中逐个了解其中的技术。这样就可以边学习边实践。建议感兴趣的同学跟着动手实践，体会其中的乐趣。我并不会完全重复编译原理书本中的理论，而是会面向对现代编译器中的实际问题进行讨论。我想让我这个系列具有较高的实践价值。</p> <p>本系列将会围绕我开发的一个编译器开发库——VBF.Compilers来进行。这个库涉及编译器前端各个阶段所需要的工具，如词法分析器、语法分析器的构造，以及读取源文件、记录编译错误的辅助设施等。完全由我来开发。有人可能要问我为何不用些现成的工具，比如ANTLR之类的呢？首先这些现成工具都有一些小毛病，不能令我完全满意；其次我的VBF与这些工具不同，它是一个纯粹的类库，只需要在VB或C#中引用，然后用VB或C#的语法来编写，就可以写出各种编译器模块来。比起依靠一堆工具框架的，我更喜欢类库这种形式。另外我的类库中也包含了我的一些小小创新，希望能给编译器开发带来一些方便。在这个系列里，我会兼顾VBF.Compilers的实现原理和其用法。大家如果想快一点实践呢，可以直接使用我的类库；如果不喜欢我的类库呢，也可以自己实现或者用别的代替，总之看大家的兴趣了。作为例子，我会在这个系列中实现一个C#语言的极小子集miniSharp，它的语法大家都再熟悉不过了，各位有兴趣可以对其随意扩展。</p> <p>VBF.Compilers类库和例子的源代码已经全部上传至Github:https://github.com/Ninputer/VBF 请大家自行用git下载最新的代码。（注，请别担心，它虽然叫”VBF“但其实100%是C#开发的……）。 另外欢迎大家关注我的微博：http://weibo.com/ninputer 我会经常在上面播报开发状态，另有许多其他丰富的信息~</p> <p>好，那就请大家期待我这一系列的文章吧。</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>