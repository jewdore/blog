---
layout: post
title: hoop安装及测试(转载)
---

<p>cloudera 网址 http://www.cloudera.com/blog/2011/07/hoop-hadoop-hdfs-over-http/</p><p>hoop说明文档 http://cloudera.github.com/hoop/docs/latest/index.html</p><p>hoop简介</p>何为Hoop？<p>Hoop是对Hadoop HDFS Proxy的改良重写，为HadoopHDFS提供了HTTP(S)的访问接口。使用Hoop，你可以：</p>通过标准的HTTP协议访问你的HDFS系统在运行不同版本的HDFS之间进行数据交换（这克服了一些RPC方式因版本不同而产生的兼容性问题）将对HDFS的操作置于防火墙的保护下。Hoop Server在系统中可以充当网关的角色，并且只允许本系统穿越。组件<p>Hoop由两部分组成：Hoop Server 和 Hoop Client，他们分别作用是：</p>Hoop Server是一个提供REST HTTP协议的服务，它允许你通过HTTP协议进行所有HDFS支持的文件系统的操作。Hoop Client是一个HDFS的客户端实现，使用它你可以使用通常的HDFS的操作方法来通过Hoop操作HDFS。例子<p>下面是几个使用传统的CURL工具通过Hoop操作HDFS的例子：</p><p>1.获取home目录</p><pre>$ curl -i "http://hoopbar:14000?op=homedir&amp;user.name=babu" HTTP/1.1 200 OK Content-Type: application/json Transfer-Encoding: chunked {"homeDir":"http:\/\/hoopbar:14000\/user\/babu"} $</pre><p>2.读取一个文件内容</p><pre>$ curl -i "http://hoopbar:14000?/user/babu/hello.txt&amp;user.name=babu" HTTP/1.1 200 OK Content-Type: application/octet-stream Transfer-Encoding: chunked Hello World! $</pre><p>3.写文件</p><pre>$ curl -i -X POST "http://hoopbar:14000/user/babu/data.txt?op=create" --data-binary @mydata.txt --header "content-type: application/octet-stream" HTTP/1.1 200 OK Location: http://hoopbar:14000/user/babu/data.txt Content-Type: application/json Content-Length: 0 $</pre><p>4.列出目录的内容</p><pre>$ curl -i "http://hoopbar:14000?/user/babu?op=list&amp;user.name=babu" HTTP/1.1 200 OK Content-Type: application/json Transfer-Encoding: chunked [ { "path" : "http:\/\/hoopbar:14000\/user\/babu\/data.txt" "isDir" : false, "len" : 966, "owner" : "babu", "group" : "supergroup", "permission" : "-rw-r--r--", "accessTime" : 1310671662423, "modificationTime" : 1310671662423, "blockSize" : 67108864, "replication" : 3 } ] $</pre><p>更多操作可以看这里：Hoop HTTP REST APIhttp://cloudera.github.com/hoop/docs/latest/HttpRestApi.html</p>获取Hoop<p>Hoop使用的是Apache License 2.0 发布，你可以在github上获取到它的源码（http://github.com/cloudera/hoop）这里（http://cloudera.github.com/hoop.）还有各种相关的安装使用教程http://cloudera.github.com/hoop/docs/latest/ServerSetup.html。</p><p>二、 安装</p><p>http://github.com/cloudera/hoop可以git方式或 zip方式下载，下载最新版本cloudera-hoop-11bb221.zip</p><p>解压</p><p>三 安装maven</p><p>下载及安装见http://maven.apache.org/download.html</p><p>解压到/usr/local下</p><p>设置<tt>export M2_HOME=/usr/local/apache-maven-3.0.3</tt></p><p><tt><tt>export M2=$M2_HOME/bin</tt></tt></p><p><tt><tt>export MAVEN_OPTS="-Xms256m -Xmx512m" 设置jvm参数</tt></tt></p><p><tt><tt><tt>export PATH=$M2:$PATH 加入到path</tt></tt></tt></p><p><tt><tt><tt></tt></tt></tt></p><p><tt><tt><tt>export JAVA_HOME=/usr/java/jdk1.6.0_24/</tt></tt></tt></p><p>且确认将$JAVA_HOME/bin加入了path。</p><p>执行mvn -version 确认是否安装成功</p><p>四 安装hoop</p><p>mvn clean package-Dmaven.test.skip=truesite assembly:single</p><pre>tar xzf hoop/hoop-distro/target/hoop-0.1.0-SNAPSHOT.tar.gz</pre><pre></pre>Configure Hadoop<p>Edit Hadoop<tt>core-site.xml</tt>and defined the Unix user that will run the Hoop server as a proxyuser. For example:</p><pre>... &lt;property&gt; &lt;name&gt;hadoop.proxyuser.#HOOPUSER#.hosts&lt;/name&gt; &lt;value&gt;myhoop.foo.com&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hadoop.proxyuser.#HOOPUSER#.groups&lt;/name&gt; &lt;value&gt;*&lt;/value&gt; &lt;/property&gt; ...</pre>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>