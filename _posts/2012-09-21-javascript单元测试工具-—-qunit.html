---
layout: post
title: JavaScript单元测试工具 — QUnit
---

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">QUnit是jQuery团队开发的JavaScript单元测试工具，使用方便，界面美观。近期试用了一下并进一步了解了JavaScript单元测试，记录一下所思所得。</p><h3 style="font-size: 12pt; margin-right: 0px; margin-left: 0px; ">什么是单元测试<blockquote style="padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: #dddddd; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-color: #dddddd; border-top-style: dashed; border-right-style: dashed; border-bottom-style: dashed; border-left-style: dashed; margin-right: 20px; margin-left: 30px; color: #555555; "><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">单元测试又称为模块测试，是针对程序模块(软件设计的最小单位)来进行正确性检验的测试工作。单元测试主要是用来检验程式的内部逻辑，也称为个体测试、结构测试或逻辑驱动测试。通常由撰写程式码的程式设计师负责进行。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">通常来说，程式設計師每修改一次程式就會進行最少一次單元測試，在編寫程式的過程中前後很可能要進行多次單元測試，以證實程式達到軟件規格書(en:Specification)要求的工作目標，沒有臭蟲；雖然单元测试不是什么必须的，但也不坏，這牽涉到專案管理的政策決定。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">&#8212;&#8212; 维基百科 (中文，英文)</p></blockquote><h3 style="font-size: 12pt; margin-right: 0px; margin-left: 0px; ">为什么JavaScript需要单元测试<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">由于存在浏览器解析环境、用户操作习惯等差异，前端程序的许多问题是无法捕捉或重现的，现在前端程序的测试多是黑盒测试，即靠点击点击点击来寻找程序bug。这种方式既费时费力，又无法保证测试的覆盖面。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">同时，前端逻辑和交互越来越复杂，和其他编程语言一样，一个函数，一个模块，在修改bug或添加新功能的过程中，很容易就产生新的bug，或使老的bug复活。这种情况下，反复进行黑盒测试，其工作量和测试质量是可想而知的。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">此外，浏览器兼容性测试是前端程序测试的重要一环，在多个浏览器之间测试前端程序，上面说的工作量就会成n倍的增加。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">为什么我们的前端程序如此脆弱？就是因为没用单元测试。。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">假如使用了单元测试，上边的问题就变得很容易了，当然前提是你要花时间去研究和编写测试用例。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">根据函数或模块的源代码，编写出包含各种情况的测试用例，每次解决bug或添加新功能，都随时更新这个用例然后进行测试，很容易就找出新bug和&#8220;复活&#8221;的老bug。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">测试兼容性，只需要在不同的浏览器中分别运行这个测试，问题就一目了然了。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">也许白盒比黑盒要多费几倍的脑子，但想想我们那脆弱的程序，想想那些随时冒出来的烦人的老bug，费点脑子，值了！</p><h3 style="font-size: 12pt; margin-right: 0px; margin-left: 0px; ">使用QUnit<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">注：下面的内容主要参考了QUnit文档和NetTuts+的这篇文章。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">建立一个测试页面，引入qunit.js和qunit.css这两个必需的文件，这两个文件是存放在github上的，鉴于目前操蛋的互联网环境，最好下载到本地调用。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; direction: inherit; ">注：body中的元素id命名必须依照如下形式，否则无法正常显示。</p>01&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>