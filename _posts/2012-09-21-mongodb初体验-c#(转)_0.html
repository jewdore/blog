---
layout: post
title: MongoDB初体验-C#(转)
---

<p>我觉得我们把关系型数据库当作铁榔头一样频繁使用的工具了，在软件开发过程中遇到的各种数据存储几乎都离不开关系型数据库(译者注:mysql,ms sql等).经过数年设计优化，性能、安全性以及可管理性的提升，现在的关系型数据库显然已是软件工程进程中的非凡成就。然而关系型数据库在某些数据存储应用场景上却并非最佳选择。</p>  <p>之前的几个月我一直在关注”no-sql”数据存储（译者注:大概指的就是非关系统数据库）的发展。我想参加一个No-SQL的会议(nosqleast-他们的口号是：select fun,profit from real_world where relational=false),在此之前不得不等待Matt.P(译者注：可能是会议的组织成员)的咨询结果。如下是一些关于no-sql这个东东的不错的文章：</p>     Dare Obasanjo: Building Scalable Databases: Denormalization, the NoSQL Movement and Digg     Eric Florenzano: My Thoughts on NoSQL    <p>我想亲自体验一下文档型数据库，于是选择了MongoDB，从它的FAQ页面上可窥其一斑：</p>  <blockquote>   <p>MongoDB 是一种文档型的数据库管理系统。你可以把它当作是持久对象的储物所，它既不是关系型的，也不像“Amazon SimpleDB”或“Google BigTable”一样是“面向数据表”的。如果此前你在你的程序中使用过ORM工具，你将会发现MongoDB提供的api很类似，容易上手但功能更强。</p> </blockquote>  <p>我选择MongoDB是因为它看起来配置简单易用..,如下：</p>  <p>1，从MongoDB上下载并解压文件</p>  <p>2，建个文件：c:\data\db&#160; (默认数据存储目录–可以更改)</p>  <p>3，运行mongod.exe</p>  <p>至于在程序里面与mongoDB进行通讯，我使用mongodb-csharp。你可以直接下载源码压缩包，也可以使用git客户端如Git On Windows(译者注:git为一种流行的源码管理方式)从github网站上拷贝源码。使用git虽然听起来有点麻烦，但上手后便会非常方便，而且通过git获取最新源码是非常快的。下载好源码后用vs编译一下得到一个叫MongoDB.Driver的程序集，有了这个程序集便可以在你的c#项目中使用MongoDB 了：</p>  <p>在程序中链接到MongoDB如下：</p>  <pre>var mongo = new Mongo();mongo.Connect();var db = mongo.getDB(&quot;movieReviews&quot;);</pre><p>我在本地电脑上使用MongoDB,它监听的是安装时设定的默认端口，不需要特别的安全设置。所以链接MongoDB的代码才如此简单，上面的代码中，我获取一个叫“movieReviews”的数据库，如果它不存在的话MongoDB会自动创建一个。我不需要建表，也不用设置主键什么的。使用文档型数据库和关系型数据库的感觉就犹如使用动态语言和静态语言一样的感觉。（译者注：可以把js当作是动态语言,c#当成是动态语言）。</p><p>下一步就是获取或创建一个列表(collection)，并且为这个列表添加文档(document)啦：   <code>var movies = db.GetCollection(</code><code>&quot;movies&quot;</code><code>);</code>   <code>var movie = </code><code>new</code> <code>Document();</code>   <code>movie[</code><code>&quot;title&quot;</code><code>] = </code><code>&quot;Star Wars&quot;</code><code>;</code>   <code>movie[</code><code>&quot;releaseDate&quot;</code><code>] = DateTime.Now;</code>   <code>movies.Insert(movie);</code></p><p>在 mongoDB里面，列表类似关系型数据库世界中的表，不同的是列表不是有行和列组成的，而是由二进制json文档组成，所以这种文档可以包含任何东西 (译者注:可以序列化成二进制Json)-它们是非表框架型的，至于如何查询和索引数据，MongoDB知道该如何去做。   <code>var spec = </code><code>new</code> <code>Document();</code>   <code>spec[</code><code>&quot;title&quot;</code><code>] = </code><code>&quot;Star Wars&quot;</code><code>;</code>   <code>var starWars = movies.FindOne(spec);</code></p><p>数据存储的适当抽象加上一点的LINQ特性，文档型数据库可能成为.NET应用的一大亮点。如果有.net的动态语言运行时内置支持那就更好了。</p><p>翻译原文地址:http://www.cnblogs.com/mamboer/archive/2010/03/05/1679292.html</p><p>英文原文地址：http://odetocode.com/Blogs/scott/archive/2009/10/13/experimenting-with-mongodb-from-c.aspx</p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>