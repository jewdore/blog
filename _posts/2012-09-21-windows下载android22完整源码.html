---
layout: post
title: Windows下载android2.2完整源码
---

<p>前两天看到有人给我留言，才发现很久没写过东西了。不过，最近也没做什么东西。下载了一个cygwin，在Windows下载android完整代码。</p><p class="MsoListParagraph" style="text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1;">1、 下载安装cygwin。参考http://yuanzhifei89.iteye.com/blog/1117549</p><p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt;">这个项目的名字来源于：GNU、Cygnus、Windows，3者的缩写。Cygwin的目标是：构建一套Windows下的Linux模拟环境。因此，Cygwin是一个庞大的项目，不只包括Linux下的开发环境，也包括工作环境，和各种各样的Linux下的软件。</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">http://cygwin.com/install.html该页面能够下载到一个网络安装程序setup.exe，然后通过它我们就可以更新和下载最新的工具版本了。</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">选择下载的地址，</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">获取android源码主要用到的工具：</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">cURL：cURL是一个利用URL语法在命令行方式下工作的文件传输工具。</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">http://curl.haxx.se/ </p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">git：android使用的版本控制软件。</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">http://git-scm.com/download </p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">windows版git（msysGit），带有gui的http://code.google.com/p/msysgit/downloads/list?can=3 </p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">repo：建立在git上的一个管理工具，简化git的使用的。它其实就是一个python脚本文件</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">http://android.git.kernel.org/repo</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">这三个工具在cygwin安装的时候，需要选择一同安装。</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">选择三个工具后，下载依赖。</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">只需一路next，安装完成即可。</p><p class="MsoListParagraph" style="text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1;">2、 使用cygwin</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">查看安装的工具是否安装好。</p><p class="MsoListParagraph" style="text-indent: 5.25pt; margin: 0cm 0cm 0pt 17.95pt; mso-char-indent-count: .5; mso-para-margin-left: 1.71gd;">Git &ndash;version查看git版本，curl 查看curl；Python &ndash;V查看python版本。如下</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">接下来和在ubuntu上下载整个源码差不多。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">　//下载安装repo版本管理工具：</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$curl http://android.git.kernel.org/repo&gt; /home/android /bin/repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$cd bin</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$chmod a+x repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">失败的情况</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">注：图中的repo下载失败了。。。。。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$python ./bin/repo init -u git://android.git.kernel.org/platform/manifest.git &ndash;b froyo</p><p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; background: yellow;">失败，由于android.git.kernel.org不能访问。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">根据http://www.bashell.net/archives/repo-without-android-git-kernel-org.html提供的方法进行访问。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">1、使用git-repo项目，地址是http://code.google.com/p/git-repo/</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">我使用的版本为1.13 ，地址http://git-repo.googlecode.com/files/repo-1.13</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">为了保持使用的习惯，将repo-1.12改名为repo。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$ mv repo-1.12 repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">由于使用cygwin，我们可以在cygwin对应的目录下直接修改文件名。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoListParagraph" style="text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1;">3、 添加执行权限</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">$chmod a+x repo</p><p class="MsoListParagraph" style="text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1;">4、 初始化repo</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">$python ./bin/repo init -u git://android.git.kernel.org/platform/manifest.git &ndash;b froyo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">错误情况：</p><p class="MsoListParagraph" style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l1 level1 lfo2;">l 如果git失败，将git修改为http，下图即git连接失败</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;">$python ./bin/repo init -u http://android.git.kernel.org/platform/manifest.git &ndash;b froyo</p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="text-indent: 18pt; margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoListParagraph" style="text-indent: -21pt; margin: 0cm 0cm 0pt 21pt; mso-char-indent-count: 0; mso-list: l1 level1 lfo2;">l 如果repo init时出现 https 443 ssl错误，那么需要将repo文件中https更改为http</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">$ sudo vi /user/bin/repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">将第五行</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">REPO_URL='https://code.google.com/p/git-repo/'</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">改为</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;">REPO_URL='http://code.google.com/p/git-repo/'</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>由于android.git.kernel.org被黑，找个几个镜像地址。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>1、https://github.com/android</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>源码在线查看地址http://www.google.com/codesearch/p?hl=en#cZwlSNS7aEw/</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>1)获取 repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>#curl https://github.com/android/tools_repo/blob/master/repo &gt; ~/bin/repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>2) 初始化</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>#repo init --repo-url=git://github.com/android/tools_repo.git -u git://github.com/android/platform_manifest.git</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>3)修改</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>将\.repo\manifests的default.xml文件，替换为https://github.com/CyanogenMod/android/blob/ce3ef4fa6fb88b2babe11b34a645a15b9b0025f3/default.xml</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>修改文件中的</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p> &lt;default revision="gingerbread"</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p> remote="github" /&gt;</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>将版本gingerbread替换为下载的相应版本。例如2.2则修改为froyo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 1.0</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 1.5：Cupcake（杯子蛋糕）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 1.6：Donut（甜甜圈）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 2.0 / 2.1：&eacute;clair（闪电泡芙）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 2.2：Froyo（冷冻忧格）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 2.3：Gingerbread（姜饼）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 3.0：Honeycomb（蜂巢）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>Android 4.0：Ice Cream Sandwich（冰淇淋三明治）</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>3) Sync repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>2、https://www.codeaurora.org/</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>下载repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>curl "http://php.webtutor.pl/en/wp-content/uploads/2011/09/repo"&gt; ~/bin/repo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>初始化</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>repo init -u git://codeaurora.org/platform/manifest.git -b froyo</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>但是如何要下载android源代码的话，需要把repo文件打开，把文件开头的</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>REPO_URL='git://android.git.kernel.org/tools/repo.git'</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>的这个地址换成其他可以下载源代码的地址久可以了，上面下载的repo就是把</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>替换成</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>REPO_URL='git://codeaurora.org/tools_repo.git'</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p>这个地址下载速度太慢了，经常断掉。</p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoNormal" style="margin: 0cm 0cm 0pt;"></p><p class="MsoListParagraph" style="text-indent: -18pt; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1;">5、 同步下载</p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;">Repo sync </p><p class="MsoListParagraph" style="text-indent: 0cm; margin: 0cm 0cm 0pt 18pt; mso-char-indent-count: 0;"></p>

了解破碎机常识：<a href='http://www.crushermillsupplier.com'>crusher mill supplier</a>